using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Snake2._0
{
    internal partial class Map
    {
        static int[,] map;
        readonly int x;
        readonly int y;
        int posX = 0;
        int posY = 0;
        int length;
        int emptyPlace;
        bool updatefood = false;
        public bool lose { get; set; } = false;
        public bool win { get; set; } = false;
        public Map(int windowWidth, int windowHeight)
        {
            x = windowWidth;
            y = windowHeight;
            map = new int[windowHeight, windowWidth];
            InitializeMap();
            DrawMap();
            length = 3;
            map[y / 2, x / 2] = 1;
            map[y / 2, x / 2 - 1] = 2;
            map[y / 2, x / 2 - 2] = 3;
            map[y / 2, x / 2 - 3] = 4;
        }
        private void InitializeMap()
        {
            for (int i = 0; i < map.GetLength(0); i++)
            {
                for (int j = 0; j < map.GetLength(1); j++)
                {
                    if (i == 0 || i == map.GetLength(0) - 1)
                    {
                        map[i, j] = -1;
                    }
                    if (j == 0 || j == map.GetLength(1) - 1)
                    {
                        map[i, j] = -1;
                    }
                    if (map[i,j] == 0)
                    {
                        emptyPlace += 1;
                    }
                }
            }
        }
        public void DrawMap()
        {
            for (int i = 0; i < y; i++)
            {
                for (int j = 0; j < x; j++)
                {
                    if (map[i, j] == -1)
                    {
                        Console.SetCursorPosition(j, i);
                        Console.Write('#');
                    }
                    if (map[i, j] == 0)
                    {
                        Console.SetCursorPosition(j, i);
                        Console.Write(' ');
                    }
                    if (map[i, j] == 1)
                    {
                        Console.SetCursorPosition(j, i);
                        Console.Write('@');
                    }
                    if (map[i, j] > 1)
                    {
                        Console.SetCursorPosition(j, i);
                        Console.Write('*');
                    }
                    if (map[i, j] == length + 1)
                    {
                        Console.SetCursorPosition(j, i);
                        Console.Write(' ');
                    }
                }
            }
        }
        private void DrawFood()
        {
            Random random = new Random();
            while (true)
            {
                int _x = random.Next(0, x);
                int _y = random.Next(0, y);
                if (map[_y, _x] == 0)
                {
                    map[_y, _x] = -2;
                    Console.SetCursorPosition(_x, _y);
                    Console.Write('$');
                    break;
                }
            }

        }
        public void Start()
        {
            DrawFood();
            DrawMap();
        }
        private void YouLose()
        {
            Console.Clear();
            Console.SetWindowSize(120, 20);
            Console.SetBufferSize(120, 20);
            Console.Write(
                "\r\n─────────────────────────────────────────────────────────────────────────────────────────────────────────────────\r\n─████████──████████─██████████████─██████──██████────██████─────────██████████████─██████████████─██████████████─\r\n─██░░░░██──██░░░░██─██░░░░░░░░░░██─██░░██──██░░██────██░░██─────────██░░░░░░░░░░██─██░░░░░░░░░░██─██░░░░░░░░░░██─\r\n─████░░██──██░░████─██░░██████░░██─██░░██──██░░██────██░░██─────────██░░██████░░██─██░░██████████─██░░██████████─\r\n───██░░░░██░░░░██───██░░██──██░░██─██░░██──██░░██────██░░██─────────██░░██──██░░██─██░░██─────────██░░██─────────\r\n───████░░░░░░████───██░░██──██░░██─██░░██──██░░██────██░░██─────────██░░██──██░░██─██░░██████████─██░░██████████─\r\n─────████░░████─────██░░██──██░░██─██░░██──██░░██────██░░██─────────██░░██──██░░██─██░░░░░░░░░░██─██░░░░░░░░░░██─\r\n───────██░░██───────██░░██──██░░██─██░░██──██░░██────██░░██─────────██░░██──██░░██─██████████░░██─██░░██████████─\r\n───────██░░██───────██░░██──██░░██─██░░██──██░░██────██░░██─────────██░░██──██░░██─────────██░░██─██░░██─────────\r\n───────██░░██───────██░░██████░░██─██░░██████░░██────██░░██████████─██░░██████░░██─██████████░░██─██░░██████████─\r\n───────██░░██───────██░░░░░░░░░░██─██░░░░░░░░░░██────██░░░░░░░░░░██─██░░░░░░░░░░██─██░░░░░░░░░░██─██░░░░░░░░░░██─\r\n───────██████───────██████████████─██████████████────██████████████─██████████████─██████████████─██████████████─\r\n─────────────────────────────────────────────────────────────────────────────────────────────────────────────────");
            Console.ReadKey();
        }
        private void YouWin()
        {
            Console.Clear();
            Console.SetWindowSize(400, 30);
            Console.SetBufferSize(400, 30);
            Console.Write("░█████╗░░█████╗░███╗░░██╗░██████╗░██████╗░░█████╗░████████╗██╗░░░██╗██╗░░░░░░█████╗░████████╗██╗░█████╗░███╗░░██╗░██████╗██╗██╗\r\n██╔══██╗██╔══██╗████╗░██║██╔════╝░██╔══██╗██╔══██╗╚══██╔══╝██║░░░██║██║░░░░░██╔══██╗╚══██╔══╝██║██╔══██╗████╗░██║██╔════╝██║██║\r\n██║░░╚═╝██║░░██║██╔██╗██║██║░░██╗░██████╔╝███████║░░░██║░░░██║░░░██║██║░░░░░███████║░░░██║░░░██║██║░░██║██╔██╗██║╚█████╗░██║██║\r\n██║░░██╗██║░░██║██║╚████║██║░░╚██╗██╔══██╗██╔══██║░░░██║░░░██║░░░██║██║░░░░░██╔══██║░░░██║░░░██║██║░░██║██║╚████║░╚═══██╗╚═╝╚═╝\r\n╚█████╔╝╚█████╔╝██║░╚███║╚██████╔╝██║░░██║██║░░██║░░░██║░░░╚██████╔╝███████╗██║░░██║░░░██║░░░██║╚█████╔╝██║░╚███║██████╔╝██╗██╗\r\n░╚════╝░░╚════╝░╚═╝░░╚══╝░╚═════╝░╚═╝░░╚═╝╚═╝░░╚═╝░░░╚═╝░░░░╚═════╝░╚══════╝╚═╝░░╚═╝░░░╚═╝░░░╚═╝░╚════╝░╚═╝░░╚══╝╚═════╝░╚═╝╚═╝\r\n\r\n██╗░░░██╗░█████╗░██╗░░░██╗  ░██╗░░░░░░░██╗██╗███╗░░██╗\r\n╚██╗░██╔╝██╔══██╗██║░░░██║  ░██║░░██╗░░██║██║████╗░██║\r\n░╚████╔╝░██║░░██║██║░░░██║  ░╚██╗████╗██╔╝██║██╔██╗██║\r\n░░╚██╔╝░░██║░░██║██║░░░██║  ░░████╔═████║░██║██║╚████║\r\n░░░██║░░░╚█████╔╝╚██████╔╝  ░░╚██╔╝░╚██╔╝░██║██║░╚███║\r\n░░░╚═╝░░░░╚════╝░░╚═════╝░  ░░░╚═╝░░░╚═╝░░╚═╝╚═╝░░╚══╝");
        }
    }
}
